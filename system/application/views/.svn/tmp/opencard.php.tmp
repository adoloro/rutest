<div id="testcard">
<div><h3><?php echo 'Card '.$current_testcard . ' of ' . $number_testcards; ?></h3></div>


<?php foreach($query as $row) : ?>
<span class="translation" <?php echo ($row->id == 1 || $row->id == 4) ? "style=\"float:left; clear:left;\"" : "style=\"float:right; clear:right;\""; ?> >
<h3><?php echo $row->type;  // Display the type of the translation in the heading ?></h3>

<?php echo preg_replace("/\{(.+?)\}/", '<span class="comment_link">$1</span>', $row->text ); ?>
</span>
<?php endforeach; ?>


<?php require_once('includes/card_navigation.php'); // Insert card navigation)?>
<?php //require_once('includes/lang_switch.php'); // Insert language switch ?>

<div id="comments">
    <?php foreach($query as $row) : ?>
            <?php $comments = $comment_model->get_comments($row->translation_id, $lang_id); ?>
                <?php foreach($comments as $comment) : ?>
                <span class="comment"><?php echo $comment->text; ?></span>
            <?php endforeach;  ?>
     <?php endforeach; ?>
</div>

<div class="errors">

     <?php $errors = $comment_model->get_errors($testcard_id); ?>
     <?php if($errors != array ()) : ?>
        
        <span class="error_link">Common mistakes</span>
        <?php foreach ($errors as $error) : ?>
                    <span class="error"><?php echo $error->text; ?></span>
        <?php endforeach;  ?>
     <?php endif;?>
</div>
    

</div>

<div id="admin"><?php  echo $admin ? anchor('site/edit'. $test_and_card_uri, 'Edit this testcard') : ''; ?></div>
